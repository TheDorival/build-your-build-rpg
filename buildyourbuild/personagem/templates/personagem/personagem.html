{% extends "layout.html" %}
{% load static %}

{% block title %}{{ personagem.title }} - Build Your Build{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/personagem.css' %}">
{% endblock %}

{% block content %}
    <article class="personagem-detail">
        <!-- Banner do Personagem (se existir) -->
        {% if personagem.banner %}
            <div class="personagem-banner-container">
                <img
                    class="personagem-banner"
                    src="{{ personagem.banner.url }}"
                    alt="{{ personagem.title }}"
                />
            </div>
        {% else %}
            <div class="personagem-banner-container no-banner">
                <div class="no-banner-placeholder">
                    <div class="no-banner-icon">ğŸ­</div>
                </div>
            </div>
        {% endif %}

        <!-- ConteÃºdo Principal -->
        <div class="personagem-content {% if personagem.banner %}has-banner{% endif %}">
            
            <!-- BotÃ£o Voltar -->
            <a href="{% url 'personagem:personagens' %}" class="back-button">
                Voltar para Personagens
            </a>

            <!-- Header -->
            <header class="personagem-header">
                <h1>{{ personagem.title }}</h1>
                
                <!-- Meta InformaÃ§Ãµes -->
                <div class="personagem-meta">
                    <div class="personagem-meta-item">
                        <span class="icon">ğŸ“…</span>
                        <span>Criado em: <strong>{{ personagem.date|date:"d/m/Y" }}</strong></span>
                    </div>
                    <div class="personagem-meta-item">
                        <span class="icon">âœï¸</span>
                        <span>Ãšltima ediÃ§Ã£o: <strong>{{ personagem.date|date:"d/m/Y" }}</strong></span>
                    </div>
                    {% if personagem.sistema %}
                    <div class="personagem-meta-item">
                        <span class="icon">ğŸ²</span>
                        <span>Sistema: <strong>{{ personagem.sistema }}</strong></span>
                    </div>
                    {% endif %}
                </div>

                <!-- Tags (exemplo - pode adicionar campo no modelo depois) -->
                <div class="personagem-tags">
                    <span class="tag">Personagem</span>
                    <!-- Adicione mais tags conforme necessÃ¡rio -->
                    <!-- <span class="tag">Guerreiro</span> -->
                    <!-- <span class="tag">NÃ­vel 5</span> -->
                </div>
            </header>

            <!-- Corpo/DescriÃ§Ã£o -->
            <div class="personagem-body">
                {{ personagem.body|linebreaks }}
            </div>

            <!-- SeÃ§Ã£o de Atributos/Stats (TemporÃ¡rio - para expandir depois) -->
            <div class="personagem-stats animate-in">
                <h3>âš”ï¸ InformaÃ§Ãµes do Personagem</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-label">NÃ­vel</span>
                        <span class="stat-value">--</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Classe</span>
                        <span class="stat-value">--</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">RaÃ§a</span>
                        <span class="stat-value">--</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">XP</span>
                        <span class="stat-value">--</span>
                    </div>
                </div>
                <p style="margin-top: 20px; font-size: 14px; color: var(--text-secondary); font-style: italic;">
                    ğŸ’¡ Mais atributos serÃ£o adicionados em breve!
                </p>
            </div>

            <!-- BotÃµes de AÃ§Ã£o -->
            <div class="personagem-actions">
                <a href="#editar" class="btn-action">
                    <span>âœï¸</span>
                    Editar Personagem
                </a>
                <button class="btn-action secondary" onclick="window.print()">
                    <span>ğŸ–¨ï¸</span>
                    Imprimir Ficha
                </button>
                <button class="btn-action secondary" onclick="compartilhar()">
                    <span>ğŸ“¤</span>
                    Compartilhar
                </button>
            </div>

        </div>
    </article>

    <footer class="footer">
        <p>&copy; 2024 Build Your Build. Todos os direitos reservados.</p>
    </footer>
{% endblock %}

{% block extra_js %}
    <script>
        // FunÃ§Ã£o para compartilhar
        function compartilhar() {
            if (navigator.share) {
                navigator.share({
                    title: '{{ personagem.title }}',
                    text: 'Confira meu personagem: {{ personagem.title }}',
                    url: window.location.href
                }).catch(err => console.log('Erro ao compartilhar:', err));
            } else {
                // Fallback: copiar URL
                navigator.clipboard.writeText(window.location.href).then(() => {
                    alert('Link copiado para Ã¡rea de transferÃªncia!');
                });
            }
        }

        // AnimaÃ§Ã£o de entrada dos elementos
        document.addEventListener('DOMContentLoaded', function() {
            const elements = document.querySelectorAll('.animate-in');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, {
                threshold: 0.1
            });

            elements.forEach(el => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(20px)';
                el.style.transition = 'all 0.6s ease-out';
                observer.observe(el);
            });
        });
    </script>
{% endblock %}